{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst hiddenLoadBtn = document.querySelector('.load-btn');\nconst loader = document.querySelector('.js-loader');\n\nlet queryValue = '';\nlet per_page = 15;\nlet page = 1;\n\nexport async function queryImg(text) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n\n    if (queryValue !== text) {\n        queryValue = text;\n        page = 1;\n    }\n\n    const params = new URLSearchParams({\n        key: '43954842-86e0551d49d52b31999082e7b',\n        q: text,\n        page: `${page}`,\n        per_page: `${per_page}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    });\n\n    const url = `${BASE_URL}${END_POINT}?${params}`;\n    const response = await axios(url);\n\n    return response.data;\n}\n\nexport async function addNewImg() {\n    page += 1;\n    hiddenLoadBtn.classList.add('is-hidden');\n    loader.classList.add('loader');\n\n    const newUrl = await queryImg(queryValue);\n    const pages = Math.round(newUrl.totalHits / per_page);\n\n    if (pages <= page) {\n        iziToast.show({\n            message:\n                'We are sorry, but you have reached the end of search results.',\n            backgroundColor: '#be25f6',\n            messageColor: '#FFF',\n            messageSize: '16px',\n            position: 'topRight',\n            maxWidth: '432px',\n        });\n        loader.classList.remove('loader');\n        hiddenLoadBtn.classList.add('is-hidden');\n        page = 1;\n        return newUrl;\n    }\n    loader.classList.remove('loader');\n    hiddenLoadBtn.classList.remove('is-hidden');\n    return newUrl;\n}\n","export function addToImgBox(arr) {\n    return arr\n        .map(\n            ({\n                largeImageURL,\n                webformatURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => {\n                return `<li class='images-list'>\n            <a class='link-img' href='${largeImageURL}' download onclick=\"return false\">\n            <img class='images' src='${webformatURL}' alt='${tags}' width='360' height='152'/>\n            <ul class='info-wrap'>\n            <li class='info-container'> <p class='info-title'>Likes</p> <p class='info-value'>${likes}</p> </li>\n            <li class='info-container'> <p class='info-title'>Views</p> <p class='info-value'>${views}</p> </li>\n            <li class='info-container'> <p class='info-title'>Comments</p> <p class='info-value'>${comments}</p> </li>\n            <li class='info-container'> <p class='info-title'>Downloads</p> <p class='info-value'>${downloads}</p> </li>\n            </ul>\n            </a>\n            </li>`;\n            }\n        )\n        .join('');\n}\n","import { queryImg } from './js/pixabay-api';\nimport { addNewImg } from './js/pixabay-api';\nimport { addToImgBox } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nlet imagesBox = document.querySelector('.images-box');\nconst loadBtn = document.querySelector('.load-btn');\n\nform.addEventListener('submit', handleSubmit);\nloadBtn.addEventListener('click', handleClickLoadBtn);\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n    const query = event.target.elements.query.value.trim();\n\n    loadBtn.classList.add('is-hidden');\n\n    if (!query) {\n        iziToast.show({\n            message: 'Please enter a search query!',\n            backgroundColor: '#EF4040',\n            messageColor: '#FFF',\n            messageSize: '16px',\n            position: 'topRight',\n            maxWidth: '432px',\n        });\n        imagesBox.innerHTML = '';\n        return;\n    }\n\n    queryImg(query)\n        .then(params => {\n            if (params.hits.length === 0) {\n                iziToast.show({\n                    message:\n                        'Sorry, there are no images matching your search query. Please try again!',\n                    backgroundColor: '#EF4040',\n                    messageColor: '#FFF',\n                    messageSize: '16px',\n                    position: 'topRight',\n                    maxWidth: '432px',\n                });\n                imagesBox.innerHTML = '';\n                return;\n            }\n\n            const markup = addToImgBox(params.hits);\n            const pages = Math.round(params.totalHits / params.hits.length);\n\n            if (pages > 1) {\n                imagesBox.innerHTML = markup;\n                loadBtn.classList.remove('is-hidden');\n                simpleLightBox.refresh();\n            } else {\n                loadBtn.classList.add('is-hidden');\n                imagesBox.innerHTML = markup;\n                simpleLightBox.refresh();\n            }\n        })\n        .catch(error => {\n            console.log(error);\n        });\n    event.target.elements.query.value = '';\n}\n\nlet simpleLightBox = new SimpleLightbox('.images-box a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    captionClass: 'text-center',\n});\n\nasync function handleClickLoadBtn() {\n    const images = await addNewImg();\n    const markup = addToImgBox(images.hits);\n    imagesBox.insertAdjacentHTML('beforeend', markup);\n    simpleLightBox.refresh();\n\n    const cardElements = document.querySelector('.images-list');\n    let cardElementsHeight = cardElements.getBoundingClientRect().height;\n    window.scrollBy({\n        left: 0,\n        top: cardElementsHeight * 2,\n        behavior: 'smooth',\n    });\n}\n"],"names":["hiddenLoadBtn","loader","queryValue","per_page","page","queryImg","text","BASE_URL","END_POINT","params","url","axios","addNewImg","newUrl","iziToast","addToImgBox","arr","largeImageURL","webformatURL","tags","likes","views","comments","downloads","form","imagesBox","loadBtn","handleSubmit","handleClickLoadBtn","event","query","markup","simpleLightBox","error","SimpleLightbox","images","cardElementsHeight"],"mappings":"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"}